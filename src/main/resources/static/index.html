<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>KYOSS Topic Manager</title>
    <script src="http://cdn.sockjs.org/sockjs-0.3.4.min.js"></script>
    <script src='deps/vertxbus-2.1.js'></script>
    <script>
        var eventBusPath = location.origin+'/eventbus';
        var eventbus = null;

        function connectEventBus() {
            eventbus = new vertx.EventBus(eventBusPath);

            eventbus.onclose = function() {
                window.setTimeout(connectEventBus(), 1000);
            }

            eventbus.onopen = function() {
                // Register an event handler to accept events from the server via the event bus
                eventbus.registerHandler('client.time.update', function(message) {
                    var timeDiv = document.getElementById('timediv');
                    timeDiv.innerHTML = message;
                });
            }
        }

        connectEventBus();
    </script>
</head>
<body>
    <h1>Hello Vert.x!!!</h1>
    <div id="timediv"></div>
</body>
</html>